<!DOCTYPE html>
<html lang="en">
	<head>
		<% include ../partials/head %>
	</head>
	<body>
		<!-- Navigation -->
		<% include ../partials/nav %>
		<!-- Page Content -->
		<div id="page-top">
			<section id="intro">
				<div class="container my-auto">
					<div class="row">
						<div class="col-lg-12 mx-auto" id="committees">
							<h1 class="section-heading" style="text-align:center;">Committees and Affiliated Groups</h1>
							<hr class="my-4"/>

							<p>Salt Lake DSA is organized by committees. Each committee democratically chooses its own priorities and goals. The committes report back to the entire membership on what projects they are working on at the monthly general meeting.
							</p> 	
							<p>Committees are the best way to start getting involved. The list below are the currently active committees.
							</p>
							<p>If you would like to start your own committe to work a specific goal, members may submit a statement to the Coordinating Committee that includes the committee name, mission statement, scope of the committee's work and at least five (5) other members interested in creating the committee.	
							</p>
							<% if (locals.data) { %>
								<div v-for="(doc, i) in vData">
									<div class="panel-heading border-top py-2">
										<a class="accordion-toggle collapsed" data-toggle="collapse" :href="'#collapse'+i">
											<div v-text="doc.category"></div>
										</a>
									</div>
									<div :id="'collapse'+ i" class="collapse pl-4">
										<% if (locals.user) { %> 
											<a v-if="doc" :href="'/b/edit/'+doc._id"><i class="fas fa-1x fa-edit"></i><span> Edit</span></a>
										<% } %>

										<div v-html="doc.description"></div>
										<% include ../partials/carouselitem %>
									</div>
								</div>
							<% } %>
						</div>
					</div>
				</div>
			</section>
			<% include ../partials/socialmedia %>
		</div>
		<script type="text/javascript">
		new Vue({ 
			el: '#committees',
			data() {
				return { 
					vData: this.parseObj(
						<%- vData %>
					),
					sliderIndex: 0,
					sliderInterval: null,
					docIndex: 0
				}
			},
			beforeDestroy(){
				clearInterval(self.sliderInterval)
			},
			mounted(){
				var self = this;
				if (self.vData && self.vData.length > 0) {
					var length = self.vData[self.docIndex].media.length;
					self.setSliderInterval(length);
				}
			},
			methods: {
				parseObj(obj) {
					if (!obj) return '';
					return obj;
				},
				changeDocIndex(i) {
					var self = this;
					self.sliderIndex = 0;
					self.docIndex = i;
					clearInterval(self.sliderInterval);
					var length = self.vData[self.docIndex].media.length;
					self.setSliderInterval(length);
				},
				setSliderInterval(length) {
					var self = this;
					self.sliderInterval = setInterval(function(){
						if (self.sliderIndex < (length - 1)){
							self.sliderIndex++;
						} else {
							self.sliderIndex = 0;
						}
					}, 5000)
				}
			}
		})

		</script>
		<!-- /.container -->
		<% include ../partials/footer %>
	</body>
</html>